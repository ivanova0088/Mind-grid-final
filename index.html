<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>MindGrid โ ุดุจูุฉ ุงูุนููู</title>
  <meta name="theme-color" content="#ffffff">
  <link rel="stylesheet" href="styles.css?v=modA6">

  <!-- Fallback ุจุณูุท ูู ุชุฃุฎุฑ ุชุญููู ุงูููุฏููู -->
  <script>
    window._mgShow = function(id){
      document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
      var el = document.getElementById(id); if(el) el.classList.add('active');
    };
  </script>
</head>
<body>

<header>
  <div class="logo">MG</div>
  <h1>MindGrid โ ุดุจูุฉ ุงูุนููู</h1>
  <div class="spacer"></div>
  <button class="btn" title="ุชุจุฏูู ุงูุซูู" onclick="(window.cycleTheme||function(){})()">๐จ</button>
</header>

<main>
  <!-- ุดุงุดุฉ ุงุฎุชูุงุฑ/ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏู -->
  <section id="userSelect" class="screen active">
    <div class="card">
      <div class="row space-between">
        <h2 class="title">ุงุฎุชุฑ ูุณุชุฎุฏููุง ุฃู ุฃุถู ุฌุฏูุฏูุง</h2>
        <button class="btn-primary" onclick="(window.showScreen||window._mgShow)('addUser')">ุฅุถุงูุฉ ูุณุชุฎุฏู</button>
      </div>
      <div id="userList" class="grid-3"></div>
    </div>
  </section>

  <!-- ุดุงุดุฉ ุฅุถุงูุฉ ูุณุชุฎุฏู -->
  <section id="addUser" class="screen">
    <div class="card">
      <h2 class="title">ูุณุชุฎุฏู ุฌุฏูุฏ</h2>
      <div class="grid-2">
        <div>
          <label>ุงูุงุณู</label>
          <input id="name" class="input" type="text" placeholder="ุงูุชุจ ุงุณูู">
        </div>
        <div>
          <label>ุงูุฏููุฉ</label>
          <input id="countryInput" class="input" list="countryList" placeholder="ุงุฎุชุฑ ุงูุฏููุฉ">
          <datalist id="countryList"></datalist>
        </div>
        <div>
          <label>ุชุงุฑูุฎ ุงููููุงุฏ</label>
          <input id="dob" class="input" type="date">
          <div class="help">ุณูุญุณุจ ุงูุนูุฑ ุชููุงุฆููุง.</div>
        </div>
        <div>
          <label>ูุณุชูู ุงูุตุนูุจุฉ</label>
          <select id="difficulty" class="select">
            <option value="easy">ุณูู</option>
            <option value="medium">ูุชูุณุท</option>
            <option value="hard" selected>ุตุนุจ</option>
          </select>
        </div>
      </div>
      <div class="row end mt8">
        <button class="btn" onclick="(window.showScreen||window._mgShow)('userSelect')">ุฑุฌูุน</button>
        <button class="btn-primary" onclick="(window.saveUser||function(){})();">ุญูุธ ูุฅููุงุก</button>
      </div>
    </div>
  </section>

  <!-- ูุงุฆูุฉ ุงูุฃูุนุงุจ -->
  <section id="games" class="screen">
    <div class="card">
      <h2 class="title">ุงุฎุชุฑ ูุถุน ุงููุนุจ</h2>
      <div class="grid-3">
        <button class="btn-primary" onclick="(window.startOdyssey||function(){})()">๐ ูุณุงุฑ ุงูุฃูุฏูุณู (ูฅ ูุฑุงุญู)</button>
        <button class="btn" onclick="(window.openCrossword||function(){})()">๐ฐ ุงููููุงุช ุงููุชูุงุทุนุฉ 9ร9</button>
        <button class="btn" onclick="(window.showScreen||window._mgShow)('scrStore')">๐๏ธ ุงููุชุฌุฑ</button>
        <button class="btn" onclick="(window.showScreen||window._mgShow)('userSelect')">ุชุจุฏูู ุงููุณุชุฎุฏู</button>
      </div>
    </div>
  </section>

  <!-- ูุณุงุฑ ุงูุฃูุฏูุณู -->
  <section id="scrOdyssey" class="screen">
    <div class="card">
      <div class="row space-between">
        <div class="row">
          <span class="badge">ูุฑุญูุฉ: <b id="odStageProgress">1 / 5</b></span>
          <span class="badge">โฑ <b id="odTimer">00:00</b></span>
          <span class="badge">๐ช <b id="coins">0</b></span>
        </div>
        <span class="stage-tag" id="odStageName">โ</span>
      </div>

      <div class="od-clue card soft mt8">
        <div class="help">ุงูุชูููุญ</div>
        <div id="odClue">โ</div>
      </div>

      <div class="grid-2 mt8">
        <div>
          <label>ุฅุฌุงุจุชู</label>
          <input id="odAnswer" class="input" type="text" placeholder="ุงูุชุจ ุงูุฅุฌุงุจุฉ ููุง" onkeydown="(window.odKey||function(){})(event)">
        </div>
        <div class="od-meta">
          <div class="help">ุงููุฌุงู:</div>
          <div id="odTopic">โ</div>
          <div class="help mt8">ุงูุทูู ุงููุชููุน:</div>
          <div id="odLen">โ</div>
        </div>
      </div>

      <div class="row center mt8">
        <button class="btn" onclick="(window.odPrev||function(){})()">โ๏ธ ุงูุณุงุจู</button>
        <button class="btn" onclick="(window.odCheck||function(){})()">ุชุญูู</button>
        <button class="btn" onclick="(window.odNext||function(){})()">ุงูุชุงูู โถ๏ธ</button>
        <button class="btn-primary" onclick="(window.odFinishStage||function(){})()">ุฅููุงุก ุงููุฑุญูุฉ</button>
      </div>

      <div id="odFeedback" class="mt8 help"></div>
      <div id="odSummary" class="mt8"></div>
      <div class="row mt8">
        <button class="btn" onclick="(window.showScreen||window._mgShow)('games')">ุฑุฌูุน</button>
      </div>
    </div>
  </section>

  <!-- ุงููููุงุช ุงููุชูุงุทุนุฉ -->
  <section id="scrCrossword" class="screen">
    <div class="card">
      <div class="row space-between">
        <div class="row">
          <button class="btn" onclick="(window.showScreen||window._mgShow)('games')">โฌ๏ธ ุฑุฌูุน</button>
          <span class="badge">๐ 9ร9</span>
          <span class="badge" id="cwDateBadge">๐ <b id="cwDate">โ</b></span>
        </div>
        <h2 class="title">ุงููููุงุช ุงููุชูุงุทุนุฉ (ููุท Newspaper)</h2>
      </div>

      <!-- ุดุฑูุท ุงููุตุต ูุงุฎุชูุงุฑ ุฃู ุณุคุงู -->
      <div id="cwStrip" class="cw-strip mt8" aria-label="ุงุฎุชูุฑ ุชูููุญูุง"></div>

      <!-- ุชุฎุทูุท ุงูุดุจูุฉ + ุงูููุญ ุงูุฐูู -->
      <div class="cw-layout mt8">
        <div id="cwBoard" class="cw-grid" aria-label="ููุญุฉ ุงููููุงุช ุงููุชูุงุทุนุฉ"></div>

        <aside class="cw-dock" id="cwDock">
          <div class="dock-head">
            <div class="dock-title">
              <span id="dkDir">ุฃููู</span>
              <span>โข</span>
              <span id="dkNum">โ</span>
              <span class="muted" id="dkLen">(โ)</span>
            </div>
            <div class="dock-sub">
              <span class="chip sm" id="dkDiff">โ</span>
              <span class="chip sm" id="dkStatus">ูู ููุญูู</span>
            </div>
          </div>

          <div class="dk-clue" id="dkClueText">โ</div>

          <div class="dk-progress">
            <div id="dkSlots" class="dk-slots"></div>
          </div>

          <div class="dk-actions">
            <button class="btn" onclick="(window.cwPrev||function(){})()">โ๏ธ ุงูุณุงุจู</button>
            <button class="btn" onclick="(window.cwCheckWord||function(){})()">ุชุญูู</button>
            <button class="btn" onclick="(window.cwNext||function(){})()">ุงูุชุงูู โถ๏ธ</button>
          </div>

          <div class="dk-actions alt">
            <button class="btn" onclick="(window.cwHintLetter||function(){})()">ุญุฑู (โ10 ๐ช)</button>
            <button class="btn" onclick="(window.cwFlipDir||function(){})()">ููุจ ุงูุงุชุฌุงู</button>
            <button class="btn" onclick="(window.cwMarkLater||function(){})()">ูุงุญููุง</button>
          </div>

          <div class="dk-footer">
            <input id="dkSearch" class="input" type="search" placeholder="ุงุจุญุซ ูู ุงูุชูููุญุงุชโฆ" oninput="(window.cwSearch||function(){})(this.value)">
            <div class="dk-filters">
              <button class="chip" onclick="(window.cwFilter||function(){})('all')">ุงููู</button>
              <button class="chip" onclick="(window.cwFilter||function(){})('across')">ุฃููู</button>
              <button class="chip" onclick="(window.cwFilter||function(){})('down')">ุนููุฏู</button>
            </div>
          </div>
        </aside>
      </div>

      <div id="cwFeedback" class="help mt8"></div>
    </div>

    <!-- Bottom Sheet (ูุงุฆูุฉ ุงูุจุทุงูุงุช) -->
    <div class="cw-sheet" id="cwSheet" data-open="0">
      <div class="cw-sheet-handle" onclick="(window.cwToggleSheet||function(){})()">
        <div id="cwChipDir" class="chip">ุฃููู</div>
        <div id="cwChipNum" class="chip">1</div>
        <div id="cwChipLen" class="chip">(5)</div>
        <div id="cwClueTextSheet" class="clue-text">โ</div>
      </div>
      <div class="cw-sheet-body">
        <div class="seg">
          <button id="segAcross" class="seg-btn active" onclick="(window.cwSetDir||function(){})('across')">ุฃููู</button>
          <button id="segDown" class="seg-btn" onclick="(window.cwSetDir||function(){})('down')">ุนููุฏู</button>
        </div>
        <div class="cw-cards" id="cwCards"></div>
        <div class="row center mt8">
          <button class="btn" onclick="(window.cwPrev||function(){})()">โ๏ธ</button>
          <button class="btn" onclick="(window.cwCheckWord||function(){})()">ุชุญูู (ูููุฉ)</button>
          <button class="btn" onclick="(window.cwNext||function(){})()">โถ๏ธ</button>
          <button class="btn" onclick="(window.cwCheckAll||function(){})()">ุชุญูู ุงููู</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ุงููุชุฌุฑ -->
  <section id="scrStore" class="screen">
    <div class="card">
      <h2 class="title">ุงููุชุฌุฑ</h2>
      <div class="row">
        ุงููุญูุธุฉ: ๐ช <b id="wCoins">0</b> โข ๐ <b id="wGems">0</b>
        <button class="btn" onclick="(window.addDevCoins||function(){})()">(+100 ููุชุฌุฑุจุฉ)</button>
        <button class="btn" onclick="(window.addDevGems||function(){})()">(+10 ููุชุฌุฑุจุฉ)</button>
      </div>
      <div class="help mt8">ูุงุญููุง ุณูุถูู ุนูุงุตุฑ ูููุฒุงุช ุชูุดุชุฑู ุจุงูุนููุงุช/ุงูุฌูุงูุฑ.</div>
      <div class="row mt8">
        <button class="btn" onclick="(window.showScreen||window._mgShow)('games')">ุฑุฌูุน</button>
      </div>
    </div>
  </section>
</main>

<!-- ุชุญููู ุขูู + ูุณุฑ ูุงุด ููู -->
<script type="module">
  (async () => {
    try {
      await import('./app.js?v=modA6');
    } catch (err) {
      const box = document.createElement('div');
      box.style.cssText = 'position:fixed;inset:auto 0 0 0;background:#fee2e2;color:#b91c1c;padding:10px;border-top:1px solid #fca5a5;font:14px/1.5 system-ui';
      box.textContent = 'Module load error: ' + (err && (err.message || err));
      document.body.appendChild(box);
    }
  })();
</script>
</body>
</html>
